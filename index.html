<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Text based RPG</title>
    <link rel="stylesheet" href="main.css">
</head>

<body onload="setupPage();">
    <form action="" onsubmit="playerAction(); return false;">
        <div id="playerinput">
            <div id="playeractionstuff">
                <label for="playeraction">Player Action:</label>
                <input type="text" name="playeraction">
                <input type="submit" value="Do action">
            </div>
        </div>
    </form>

    <div id="playerinfo">
        <div id="headinghack">
            <h2>Player Info</h2>
        </div>
        <div class="infoowner">
            <div>
                <label for="hp">HP</label>
                <p id="hpcur">10/10</p>
            </div>
            <div>
                <label for="armor">Armor</label>
                <p id="armor">0</p>
            </div>
            <div>
                <label for="target">Target</label>
                <p id="target">None</p>
            </div>
        </div>
    </div>



    <p id="out">Ready Player One</p>


    <script src="main.js"></script>
    <script>
        
        //Setup the page
        function setupPage() {
            setOutputFunction(doOutput);
            setOutputClearFunction(clearOutput);
            startPlayer();
        }
        
        function getInput() {
            //Lots of sanity checks
            return document.forms[0].playeraction.value.toLowerCase().trim().toString();
        }

        function doOutput(out) {
            document.getElementById("out").innerHTML += out.replace("\n", "<br>");
        }

        function clearOutput() {
            document.getElementById("out").innerHTML = "";
        }

        function getPlayerInfo() {
            getHP();
            getPlayerTarget();
            playerAction();
        }

        function getHP() {
            var hp = document.getElementById("hpcur").innerHTML;
            hp = getPlayerHP(); + "/" + getPlayerMaxHP();
        }

        function getPlayerArmor() {
            var armor = document.getElementById("armor").innerHTML;
        }
        
        function clearInput() {
            document.forms[0].playeraction.value = "";
        }
        
        function playerAction() {
            doPlayerAction(getInput());
            clearInput();
        }
    </script>
</body>

</html>
